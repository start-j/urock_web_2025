<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í´ë¦° ë²„íŠ¼ ì¢…í•© í…ŒìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .debug-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 300px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 12px;
            z-index: 9999;
        }
        .debug-item {
            margin-bottom: 8px;
            padding: 5px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
        }
        .status-ok { color: #4CAF50; }
        .status-error { color: #F44336; }
        .status-warning { color: #FF9800; }
        
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .form-step {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- ë””ë²„ê¹… íŒ¨ë„ -->
    <div class="debug-panel">
        <div class="debug-item">
            <strong>ì´ˆê¸°í™” ìƒíƒœ</strong>
            <div id="init-status">ê²€ì‚¬ ì¤‘...</div>
        </div>
        <div class="debug-item">
            <strong>ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ</strong>
            <div id="event-status">ê²€ì‚¬ ì¤‘...</div>
        </div>
        <div class="debug-item">
            <strong>CSS ë¡œë“œ</strong>
            <div id="css-status">ê²€ì‚¬ ì¤‘...</div>
        </div>
        <div class="debug-item">
            <strong>ì…ë ¥ í•„ë“œ</strong>
            <div id="input-status">ê²€ì‚¬ ì¤‘...</div>
        </div>
        <div class="debug-item">
            <strong>í´ë¦° ë²„íŠ¼</strong>
            <div id="clean-status">ê²€ì‚¬ ì¤‘...</div>
        </div>
        <div class="debug-item">
            <button onclick="runFullTest()" style="width: 100%; padding: 8px; background: #2196F3; color: white; border: none; border-radius: 4px;">ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        </div>
    </div>

    <div class="test-container">
        <h1>ğŸ¯ í´ë¦° ë²„íŠ¼ ì¢…í•© í…ŒìŠ¤íŠ¸</h1>
        
        <!-- ê¸°ë³¸ ì…ë ¥ í•„ë“œ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>1. ê¸°ë³¸ ì…ë ¥ í•„ë“œ</h2>
            <div class="contents">
                <form>
                    <div class="form-step">
                        <div class="input">
                            <input type="text" id="test-input-1" name="test1" placeholder="í…ìŠ¤íŠ¸ ì…ë ¥í•´ë³´ì„¸ìš”">
                            <label for="test-input-1">ê¸°ë³¸ í…ìŠ¤íŠ¸</label>
                        </div>
                    </div>
                    
                    <div class="form-step">
                        <div class="input">
                            <input type="email" id="test-input-2" name="test2" placeholder="ì´ë©”ì¼ ì…ë ¥í•´ë³´ì„¸ìš”">
                            <label for="test-input-2">ì´ë©”ì¼</label>
                        </div>
                    </div>
                    
                    <div class="form-step">
                        <div class="input">
                            <input type="tel" id="test-input-3" name="test3" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥í•´ë³´ì„¸ìš”">
                            <label for="test-input-3">ì „í™”ë²ˆí˜¸</label>
                        </div>
                    </div>

                    <div class="form-step">
                        <div class="input input-memo">
                            <textarea id="test-textarea-1" name="memo1" placeholder="ë©”ëª¨ ì…ë ¥í•´ë³´ì„¸ìš”"></textarea>
                            <label for="test-textarea-1">ë©”ëª¨</label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- ë™ì  ì¶”ê°€ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>2. ë™ì  ì…ë ¥ í•„ë“œ ì¶”ê°€</h2>
            <button onclick="addDynamicInput()" style="margin-bottom: 20px; padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 4px;">ë™ì  ì…ë ¥ í•„ë“œ ì¶”ê°€</button>
            <div id="dynamic-container" class="contents">
                <form>
                    <!-- ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ì…ë ¥ í•„ë“œë“¤ -->
                </form>
            </div>
        </div>

        <!-- íƒ­ ì»¨í…ì¸  ì‹œë®¬ë ˆì´ì…˜ -->
        <div class="test-section">
            <h2>3. íƒ­ ì»¨í…ì¸  ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜</h2>
            <button onclick="simulateTabLoad()" style="margin-bottom: 20px; padding: 10px 20px; background: #FF9800; color: white; border: none; border-radius: 4px;">íƒ­ ì»¨í…ì¸  ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜</button>
            <div id="tab-simulation" class="contents">
                <!-- íƒ­ ì»¨í…ì¸ ê°€ ë¡œë“œë  ì˜ì—­ -->
            </div>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script type="module" src="/js/index.js"></script>
    
    <script>
        let testCounter = 0;
        
        // ë””ë²„ê¹… ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateDebugStatus() {
            // ì´ˆê¸°í™” ìƒíƒœ ê²€ì‚¬
            const initStatus = document.getElementById('init-status');
            const hasInitFunction = typeof window.initializeInputFields === 'function';
            initStatus.innerHTML = hasInitFunction ? 
                '<span class="status-ok">âœ“ ì´ˆê¸°í™” í•¨ìˆ˜ ì¡´ì¬</span>' : 
                '<span class="status-error">âœ— ì´ˆê¸°í™” í•¨ìˆ˜ ì—†ìŒ</span>';
            
            // ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ ê²€ì‚¬
            const eventStatus = document.getElementById('event-status');
            eventStatus.innerHTML = '<span class="status-ok">âœ“ MutationObserver ë“±ë¡ë¨</span>';
            
            // CSS ë¡œë“œ ê²€ì‚¬
            const cssStatus = document.getElementById('css-status');
            const hasCSS = document.querySelector('link[href*="style.css"]');
            cssStatus.innerHTML = hasCSS ? 
                '<span class="status-ok">âœ“ style.css ë¡œë“œë¨</span>' : 
                '<span class="status-warning">â–³ CSS í™•ì¸ í•„ìš”</span>';
            
            // ì…ë ¥ í•„ë“œ ê°ì§€
            const inputStatus = document.getElementById('input-status');
            const inputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], textarea');
            inputStatus.innerHTML = '<span class="status-ok">âœ“ ' + inputs.length + 'ê°œ ì…ë ¥ í•„ë“œ ê°ì§€</span>';
            
            // í´ë¦° ë²„íŠ¼ ê²€ì‚¬
            const cleanStatus = document.getElementById('clean-status');
            const cleanBtns = document.querySelectorAll('.clear-btn, .input-clear, .clear-button');
            const visibleBtns = Array.from(cleanBtns).filter(btn => 
                btn.style.display === 'flex' || btn.style.display === 'block' || 
                window.getComputedStyle(btn).display === 'flex'
            );
            
            cleanStatus.innerHTML = cleanBtns.length > 0 ? 
                '<span class="status-ok">âœ“ ' + cleanBtns.length + 'ê°œ í´ë¦° ë²„íŠ¼ (' + visibleBtns.length + 'ê°œ í‘œì‹œì¤‘)</span>' : 
                '<span class="status-warning">â–³ í´ë¦° ë²„íŠ¼ ë¯¸ìƒì„±</span>';
        }
        
        // ë™ì  ì…ë ¥ í•„ë“œ ì¶”ê°€
        function addDynamicInput() {
            testCounter++;
            const container = document.getElementById('dynamic-container').querySelector('form');
            const newInput = document.createElement('div');
            newInput.className = 'form-step';
            newInput.innerHTML = 
                '<div class="input">' +
                    '<input type="text" id="dynamic-input-' + testCounter + '" name="dynamic' + testCounter + '" placeholder="ë™ì  ì…ë ¥ ' + testCounter + '">' +
                    '<label for="dynamic-input-' + testCounter + '">ë™ì  í•„ë“œ ' + testCounter + '</label>' +
                '</div>';
            container.appendChild(newInput);
            
            console.log('[Test] ë™ì  ì…ë ¥ í•„ë“œ ' + testCounter + ' ì¶”ê°€ë¨');
            setTimeout(updateDebugStatus, 1000);
        }
        
        // íƒ­ ì»¨í…ì¸  ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜
        function simulateTabLoad() {
            const container = document.getElementById('tab-simulation');
            container.innerHTML = 
                '<form>' +
                    '<div class="form-step">' +
                        '<div class="input">' +
                            '<input type="text" id="tab-sim-1" name="tabsim1" placeholder="ì‹œë®¬ë ˆì´ì…˜ ì…ë ¥ 1">' +
                            '<label for="tab-sim-1">ì‹œë®¬ë ˆì´ì…˜ í•„ë“œ 1</label>' +
                        '</div>' +
                    '</div>' +
                    '<div class="form-step">' +
                        '<div class="input">' +
                            '<input type="email" id="tab-sim-2" name="tabsim2" placeholder="ì‹œë®¬ë ˆì´ì…˜ ì…ë ¥ 2">' +
                            '<label for="tab-sim-2">ì‹œë®¬ë ˆì´ì…˜ í•„ë“œ 2</label>' +
                        '</div>' +
                    '</div>' +
                '</form>';
            
            // tabContentLoaded ì´ë²¤íŠ¸ ë°œìƒ
            setTimeout(function() {
                console.log('[Test] tabContentLoaded ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜');
                document.dispatchEvent(new CustomEvent('tabContentLoaded', {
                    detail: { test: true }
                }));
                setTimeout(updateDebugStatus, 1000);
            }, 100);
        }
        
        // ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        function runFullTest() {
            console.log('[Test] ğŸš€ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            // 1. ê¸°ë³¸ ì…ë ¥ í•„ë“œì— ê°’ ì…ë ¥
            const inputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], textarea');
            inputs.forEach(function(input, index) {
                setTimeout(function() {
                    input.focus();
                    input.value = 'í…ŒìŠ¤íŠ¸ê°’' + (index + 1);
                    input.dispatchEvent(new Event('input', { bubbles: true }));
                    console.log('[Test] âœ… ' + input.id + ' í•„ë“œì— ê°’ ì…ë ¥ë¨');
                }, index * 300);
            });
            
            // 2. í´ë¦° ë²„íŠ¼ í‘œì‹œ í™•ì¸
            setTimeout(function() {
                const cleanBtns = document.querySelectorAll('.clear-btn, .input-clear, .clear-button');
                console.log('[Test] ğŸ¯ ' + cleanBtns.length + 'ê°œ í´ë¦° ë²„íŠ¼ í™•ì¸ë¨');
                cleanBtns.forEach(function(btn, index) {
                    const isVisible = btn.style.display !== 'none';
                    console.log('[Test] í´ë¦° ë²„íŠ¼ ' + (index + 1) + ': ' + (isVisible ? 'âœ… í‘œì‹œë¨' : 'âŒ ìˆ¨ê¹€'));
                });
                updateDebugStatus();
            }, 4000);
            
            // 3. ì™„ë£Œ í™•ì¸
            setTimeout(function() {
                console.log('[Test] ğŸ‰ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!');
                alert('í…ŒìŠ¤íŠ¸ ì™„ë£Œ! ì½˜ì†”ì—ì„œ ìƒì„¸ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
            }, 5000);
        }
        
        // í˜ì´ì§€ ë¡œë“œ í›„ ì´ˆê¸° ìƒíƒœ í™•ì¸
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                updateDebugStatus();
                console.log('[Test] ğŸ“‹ ì´ˆê¸° ìƒíƒœ í™•ì¸ ì™„ë£Œ');
                
                // ìë™ í…ŒìŠ¤íŠ¸ ê°’ ì…ë ¥
                setTimeout(function() {
                    const firstInput = document.getElementById('test-input-1');
                    if (firstInput) {
                        firstInput.focus();
                        firstInput.value = 'ìë™í…ŒìŠ¤íŠ¸';
                        firstInput.dispatchEvent(new Event('input', { bubbles: true }));
                        console.log('[Test] ğŸ”„ ìë™ í…ŒìŠ¤íŠ¸ ê°’ ì…ë ¥ë¨');
                        
                        setTimeout(updateDebugStatus, 1000);
                    }
                }, 2000);
            }, 1000);
        });
        
        // ì£¼ê¸°ì  ìƒíƒœ ì—…ë°ì´íŠ¸
        setInterval(updateDebugStatus, 5000);
    </script>
</body>
</html> 